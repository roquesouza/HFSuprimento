<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns:f="http://java.sun.com/jsf/core" contentType="text/html" encoding='UTF-8'>
	<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title>HFCotação - Sistema de Cotação - SM Consultoria</title>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/geral.css" />
</h:head>

<h:body id="bodyDashBoardErro" rendered="#{cotacaoProdutoFornecedorFaces.cotacaoProdutoFornecedorModel == null}">

	<ui:include src="erro.html" />

</h:body>

<h:body id="bodyDashBoard" style="font-size: 11px" rendered="#{cotacaoProdutoFornecedorFaces.cotacaoProdutoFornecedorModel != null}">
	
	<script src="#{request.contextPath}/resources/js/jquery.maskMoney.js" type="text/javascript" />
	
	<h:form id="tabsCRUD" prependId="false">

		<p:growl autoUpdate="true" showDetail="true" showSummary="false" />
		
		<p:outputPanel autoUpdate="true">
			<script type="text/javascript">
				$(document).ready(function() {
					$(".dinheiro").maskMoney({
						allowNegative : false,
						precision : 5,
						defaultZero : false,
						thousands : '.',
						decimal : ','
					});
					$(".numero").maskMoney({
						allowNegative : false,
						precision : 0,
						defaultZero : false,
						thousands : '.',
					});
				});
			</script>
		</p:outputPanel>

		<p:layout fullPage="true">

			<p:layoutUnit id="areaTrabalho" header="Fornecedor: #{cotacaoProdutoFornecedorFaces.cotacaoProdutoFornecedorModel.fornecedorModel.nomeFantasia}" position="center">

				<h:panelGrid columns="1" style="width: 100%">

					<p:fieldset legend="PRODUTOS DA COTAÇÃO Nº #{cotacaoProdutoFornecedorFaces.cotacaoProdutoFornecedorModel.cotacaoProdutoModel.cotacaoModel.id}" style="width: 98%">

						<p:dataTable id="gridPesquisa" value="#{cotacaoProdutoFornecedorFaces.cotacaoProdutoFornecedorModel.grid}" var="linha" emptyMessage="Nenhum item encontrado">

							<p:column styleClass="coluna30" headerText="Produto">
								<h:outputLabel value="#{linha.cotacaoProdutoModel.produtoModel.nomePrincipal}" />
							</p:column>

							<p:column styleClass="coluna7" headerText="Unidade">
								<h:outputLabel value="#{linha.cotacaoProdutoModel.produtoModel.unidadeMedidaModel.descricao}" />
							</p:column>

							<p:column styleClass="coluna7" headerText="Quantidade">
								<h:outputLabel value="#{linha.cotacaoProdutoModel.quantidadeSolicitada}">
									<f:convertNumber type="number" pattern="#,###,##0.##" locale="pt_BR" />
								</h:outputLabel>
							</p:column>

							<p:column headerText="Fabricantes Sugeridos" styleClass="coluna15">
								<h:outputLabel value="#{linha.fabricantesSugeridos}" />
							</p:column>

							<p:column headerText="Fabricante" styleClass="coluna15">
								<p:inputText id="fabricante" value="#{linha.fabricante}" style="width: 90%;" />
							</p:column>
							
							<p:column styleClass="coluna10" headerText="Valor Unitário (R$)">
								<p:inputText id="valorUnitario" value="#{linha.valor}" styleClass="dinheiro" maxlength="14" style="width: 90%;">
									<f:convertNumber type="number" pattern="###,###,##0.00###" locale="pt_BR" />
								</p:inputText>
							</p:column>

							<p:column headerText="Quantidade caixa" styleClass="coluna10">
								<p:inputText id="qtdCaixa" value="#{linha.qtdCaixa}" maxlength="10" styleClass="numero" style="width: 90%;" />
							</p:column>

							<p:column headerText="Observação" styleClass="coluna10">
								<h:outputText value="#{linha.cotacaoProdutoModel.observacao}" />
							</p:column>

							<p:column headerText="Observação" styleClass="coluna15">
								<p:inputTextarea value="#{linha.observacao}" maxlength="995" rows="3" autoResize="false" style="width: 98%" />
							</p:column>

						</p:dataTable>

						<p:commandButton type="button" rendered="#{!empty cotacaoProdutoFornecedorFaces.cotacaoProdutoFornecedorModel.grid}" id="btnSalvar" value="Gravar" icon="salvar" onclick="cdAlterar.show()" style="margin-top: 10px" />

					</p:fieldset>

				</h:panelGrid>

			</p:layoutUnit>

			<p:confirmDialog message="Confirma gravação da cotação?" header="Aviso" severity="alert" widgetVar="cdAlterar" modal="true">
				<p:commandButton global="true" value="Sim" onclick="cdAlterar.hide()" action="#{cotacaoProdutoFornecedorFaces.updateEvent}" />
				<p:commandButton value="Nao" onclick="cdAlterar.hide()" />
			</p:confirmDialog>

		</p:layout>

	</h:form>

</h:body>
	</html>
</f:view>